{"componentChunkName":"component---src-templates-blog-post-js","path":"/installing-php-8-3-6-with-imap-on-macos-using-phpenv/","result":{"data":{"site":{"siteMetadata":{"title":"Boris's Blog"}},"markdownRemark":{"id":"8625eb33-7b50-5544-878c-579042ca1ac5","excerpt":"Installing PHP 8.3.6 with IMAP on macOS: A Real Developer's Journey Hey there, fellow coders! I recently went through the somewhat painful process of getting…","html":"<h1>Installing PHP 8.3.6 with IMAP on macOS: A Real Developer's Journey</h1>\n<p>Hey there, fellow coders! I recently went through the somewhat painful process of getting PHP 8.3.6 up and running on my Mac, complete with IMAP support. I thought I'd share my experience in case any of you find yourselves in the same boat. Fair warning: it wasn't exactly a walk in the park, but we'll get through this together.</p>\n<h2>What I Was Trying to Do</h2>\n<p>I needed to set up PHP 8.3.6 with IMAP support on my Mac. I decided to use phpenv because, well, juggling multiple PHP versions is just part of the job these days, right?</p>\n<h2>Starting Point</h2>\n<p>I already had phpenv installed on my Mac. If you don't, you might want to look that up first. Also, make sure you've got Homebrew - it's going to be your best friend for this process.</p>\n<h2>The Command That Started It All</h2>\n<p>I began with what I thought would be a simple command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">phpenv <span class=\"token function\">install</span> <span class=\"token number\">8.3</span>.6</code></pre></div>\n<p>Oh, how naive I was...</p>\n<h2>The Problems I Ran Into (and How I Fixed Them)</h2>\n<h3>1. Missing Libraries</h3>\n<p>First up, my system complained about missing libraries. The error looked something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">configure: error: Cannot find libtidy</code></pre></div>\n<p>The fix? Brew to the rescue:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> tidy-html5 openssl@3 zlib <span class=\"token function\">bzip2</span> libedit readline gettext libiconv libsodium krb5 imap-uw <span class=\"token function\">curl</span></code></pre></div>\n<p>Yeah, that's a lot of stuff. But trust me, you'll need it all.</p>\n<h3>2. Configuration Warnings</h3>\n<p>Next, I got some warnings about configuration options:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">configure: WARNING: unrecognized options: --disable-libxml\nconfigure: WARNING: libedit directory ignored, rely on pkg-config</code></pre></div>\n<p>These weren't show-stoppers, but they bugged me. I ended up tweaking my build options (more on that later).</p>\n<h3>3. PHP Version Chaos</h3>\n<p>Even after I thought I'd installed 8.3.6, my system was stuck on an older version:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">php -v\nPHP 8.1.28 (cli) (built: Aug  9 2024 22:32:28) (NTS)</code></pre></div>\n<p>Turns out, my PATH was all messed up. Had to do some .zshrc magic to fix it.</p>\n<h3>4. Missing Headers</h3>\n<p>Then came the header file errors:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fatal error: 'openssl/ssl.h' file not found\nfatal error: 'imap/imap.h' file not found</code></pre></div>\n<p>More path issues. The compiler couldn't find the files it needed.</p>\n<h3>5. IMAP Weirdness</h3>\n<p>The cherry on top was this beauty:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">configure: error: utf8_mime2text() has new signature, but U8T_CANONICAL is missing. This should not happen.</code></pre></div>\n<p>Apparently, my IMAP library was having an identity crisis.</p>\n<h2>How I Fixed Everything</h2>\n<h3>1. The Great Library Install</h3>\n<p>First things first, I made sure I had all the libraries I needed:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> tidy-html5 openssl@3 zlib <span class=\"token function\">bzip2</span> libedit readline gettext libiconv libsodium krb5 imap-uw <span class=\"token function\">curl</span></code></pre></div>\n<h3>2. Configuration Tweaks</h3>\n<p>I added this to my .zshrc file to tell PHP where to find everything:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PHP_BUILD_CONFIGURE_OPTS</span><span class=\"token operator\">=</span><span class=\"token string\">\"--with-openssl=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> openssl@3<span class=\"token variable\">)</span></span> \\\n  --with-zlib=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> zlib<span class=\"token variable\">)</span></span> \\\n  --with-bz2=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> <span class=\"token function\">bzip2</span><span class=\"token variable\">)</span></span> \\\n  --with-curl \\\n  --with-libedit \\\n  --with-readline=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> readline<span class=\"token variable\">)</span></span> \\\n  --with-gettext=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> gettext<span class=\"token variable\">)</span></span> \\\n  --with-iconv=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> libiconv<span class=\"token variable\">)</span></span> \\\n  --with-sodium=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> libsodium<span class=\"token variable\">)</span></span> \\\n  --with-kerberos=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> krb5<span class=\"token variable\">)</span></span> \\\n  --with-imap=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> imap-uw<span class=\"token variable\">)</span></span> \\\n  --with-imap-ssl=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> openssl@3<span class=\"token variable\">)</span></span> \\\n  --with-tidy=<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> tidy-html5<span class=\"token variable\">)</span></span> \\\n  --enable-mbstring \\\n  --enable-intl\"</span></code></pre></div>\n<h3>3. PATH Fix</h3>\n<p>To make sure phpenv was in charge, I updated my .zshrc:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PHPENV_ROOT</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token environment constant\">$HOME</span>/.phpenv\"</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-d</span> <span class=\"token string\">\"<span class=\"token variable\">${PHPENV_ROOT}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${PHPENV_ROOT}</span>/shims:<span class=\"token variable\">${PHPENV_ROOT}</span>/bin:<span class=\"token environment constant\">$PATH</span>\"</span>\n  <span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>phpenv init -<span class=\"token variable\">)</span></span>\"</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># At the end of the file</span>\n<span class=\"token keyword\">if</span> <span class=\"token builtin class-name\">command</span> <span class=\"token parameter variable\">-v</span> phpenv <span class=\"token operator\">></span>/dev/null <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token environment constant\">$HOME</span>/.phpenv/versions/<span class=\"token variable\"><span class=\"token variable\">$(</span>phpenv version-name<span class=\"token variable\">)</span></span>/bin:<span class=\"token environment constant\">$PATH</span>\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<h3>4. Header File Hunt</h3>\n<p>To help the compiler find those pesky header files:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CPPFLAGS</span><span class=\"token operator\">=</span><span class=\"token string\">\"-I<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> openssl@3<span class=\"token variable\">)</span></span>/include -I<span class=\"token variable\"><span class=\"token variable\">$(</span>brew <span class=\"token parameter variable\">--prefix</span> imap-uw<span class=\"token variable\">)</span></span>/include <span class=\"token variable\">$CPPFLAGS</span>\"</span></code></pre></div>\n<h3>5. IMAP Update</h3>\n<p>Finally, I made sure my IMAP library was up to date:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew upgrade imap-uw</code></pre></div>\n<h2>The Moment of Truth</h2>\n<p>After all that, I crossed my fingers and ran:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">source</span> ~/.zshrc\nphpenv <span class=\"token function\">install</span> <span class=\"token number\">8.3</span>.6\nphpenv global <span class=\"token number\">8.3</span>.6\nphp <span class=\"token parameter variable\">-v</span></code></pre></div>\n<p>And... it worked! To make sure IMAP was there:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php <span class=\"token parameter variable\">-m</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> imap</code></pre></div>\n<p>Saw 'imap' in the output, and I nearly cried tears of joy.</p>\n<h2>Wrapping Up</h2>\n<p>So there you have it. It was a bit of a wild ride, but we got there in the end. If you're trying this yourself, remember that your mileage may vary. Don't be afraid to dig into error messages and don't hesitate to ask for help if you get stuck.</p>\n<p>Oh, and once you've got it all set up, don't forget to keep your PHP updated. Security and all that jazz.</p>\n<p>Happy coding, folks! May your installations be less painful than mine.</p>","frontmatter":{"title":"Installing PHP 8.3.6 with IMAP on macOS: A Real Developer's Journey","date":"September 01, 2024","description":"Follow a developer's real-world experience installing PHP 8.3.6 with IMAP support on macOS using phpenv. Learn how to overcome common challenges and set up a robust PHP development environment.","imageCaption":"A developer's workspace showcasing PHP development on macOS","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"https://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/9ba5d/featured.jpg","srcSet":"https://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/a1264/featured.jpg 750w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/768e5/featured.jpg 1080w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/72db9/featured.jpg 1366w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/9ba5d/featured.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"https://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/c23ad/featured.webp 750w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/611c2/featured.webp 1080w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/1e1dd/featured.webp 1366w,\nhttps://bdteo.github.io/static/8a20181260d78bc5afa16ab9c3cd36b2/53901/featured.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.7739583333333334}}}}},"previous":{"fields":{"slug":"/laravel-sail-vs-laradock-choosing-right-docker-solution/"},"frontmatter":{"title":"Laravel Sail vs Laradock: Choosing the Right Docker Solution for Your PHP Projects 🐳"}},"next":{"fields":{"slug":"/shadow-weaver-redemption-journey/"},"frontmatter":{"title":"The Tale of the Shadow Weaver: A Journey of Redemption and Forgiveness"}}},"pageContext":{"id":"8625eb33-7b50-5544-878c-579042ca1ac5","previousPostId":"4c3b5096-8b93-5619-9f65-c7c10d2406e4","nextPostId":"613d09f5-9c08-5eb4-bade-0b98f8baf58a"}},"staticQueryHashes":["2841359383","2923011943"],"slicesMap":{}}